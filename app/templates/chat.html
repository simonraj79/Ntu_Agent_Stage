<!-- app/templates/chat.html -->
{% extends "base.html" %}
{% block title %}Chat with {{ agent.name }} - NTUAgent{% endblock %}
{% block extra_head %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.3/purify.min.js"></script>
{% endblock %}

{% block content %}
<div class="chat-container">
    <div class="chat-header">
        <h1>Chat with {{ agent.name }}</h1>
    </div>
    <div id="chat-messages" class="chat-messages"></div>
    <div class="chat-input-container">
        <form id="chat-form" data-chat-url="{{ url_for('agents.chat', agent_id=agent.id) }}">
            <input type="text" id="message-input" placeholder="Type your message..." required>
            <button type="submit">Send</button>
        </form>
        <div class="fine-print">LLM can make mistakes. Check important info.</div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
{% endblock %}
